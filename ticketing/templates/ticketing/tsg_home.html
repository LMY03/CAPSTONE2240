<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Ticket list</title>
    {% comment %} <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous"> {% endcomment %}
  </head>
  <body>
    <div class="container">
      <div class="mb-3">
        <select class="form-select" onchange="window.location.href=this.value">
          <option value="{% url 'ticketing:index' %}">All</option>
          <option value="{% url 'ticketing:home-filter' %}?status=CR" {% if status == 'CR' %} selected {% endif %}>Creating</option>
          <option value="{% url 'ticketing:home-filter' %}?status=P" {% if status == 'P' %} selected {% endif %}>Pending</option>
          <option value="{% url 'ticketing:home-filter' %}?status=FR" {% if status == 'FR' %} selected {% endif %}>For revision</option>
          <option value="{% url 'ticketing:home-filter' %}?status=CO" {% if status == 'CO' %} selected {% endif %}>Completed</option>
          <option value="{% url 'ticketing:home-filter' %}?status=D" {% if status == 'D' %} selected {% endif %}>Delete</option>
        </select>
        
      </div>
      {% if request_list %}
        <table class="table table-bordered table-striped">
          <thead>
            <tr>
              <th>Requester</th>
              <th>Template OS</th>
              <th>Cores</th>
              <th>RAM</th>
              <th>Storage</th>
              <th>Internet Access</th>
              <th>Status</th>
            </tr>
          </thead>
          <tbody>
            {% for request in request_list %}
              <tr>
                <td>{{ request.requester__first_name }} {{ request.requester__last_name }}</td>
                <td>{{ request.template__os_name }}</td>
                <td>{{ request.cores }}</td>
                <td>{{ request.ram }}</td>
                <td>{{ request.storage }}</td>
                <td>{{ request.has_internet }}</td>
                {% if request.status == "CR" %}
                <td>Creating</td>
                {% elif request.status == "P" %}
                <td>Pending</td>
                {% elif request.status == "FR" %}
                <td>For revision</td>
                {% elif request.status == "CO" %}
                <td>Completed</td>
                {% elif request.status == "D" %}
                <td>Delete</td>
                {% endif %}
                <td><a href="{% url 'ticketing:details' request.id %}" class="btn btn-primary">Open</a></td>
              </tr>
            {% endfor %}
          </tbody>
        </table>
      {% else %}
        <p>No Requests are available.</p>
      {% endif %}
    </div>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz" crossorigin="anonymous"></script>
  </body>
</html>
